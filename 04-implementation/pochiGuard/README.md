# 🐕 PochiGuard - 犬用GPSトラッカー＆活動量計

M5StickC Plus2を使用した小型犬向けスマート首輪デバイス

## 📦 概要

PochiGuardは、愛犬の位置追跡と健康管理を実現するIoTデバイスです。
軽量コンパクトな M5StickC Plus2 を使用し、小型犬でも負担なく装着できます。

### ノアちゃん専用設定
- 名前：ノア
- 犬種：チワワ
- 体重：2.1kg  
- 誕生日：2023年9月28日
- 自宅：福岡市早良区室見

## 🚀 主な機能

### 1. GPS位置追跡
- **脱走検知**：自宅から1km離れると即座にLINE通知
- **5分ごとの位置情報**：脱走時は5分間隔で現在地を通知
- **Google Maps連携**：ワンタップで地図表示

### 2. 活動量計測（IMU活用）
- **歩数カウント**：1日の歩数を自動計測
- **活動パターン分析**：睡眠/休息/歩行/走行/遊びを判別
- **カロリー計算**：体重から消費カロリーを推定
- **転倒検知**：異常な動きを検知してアラート

### 3. LINE通知機能
- 脱走時の緊急通知
- 1時間ごとの活動レポート
- テストボタンで動作確認可能

## 📐 ハードウェア構成

```
M5StickC Plus2（48g）
└── Grove Port → GPS Unit v1.1
    └── UART通信（9600bps）
```

### 必要なもの
- M5StickC Plus2
- M5Stack GPS Unit v1.1
- 首輪取り付け用ケース（3Dプリント推奨）

## 🔧 セットアップ

### 1. Arduino IDE設定
```
ボード: M5StickC Plus2
Upload Speed: 1500000
```

### 2. 必要なライブラリ
- M5StickCPlus2
- TinyGPSPlus  
- ArduinoJson

### 3. 設定ファイル
`config_local.h` は既に設定済み（既存プロジェクトから流用）

### 4. 書き込み
```bash
# Arduino IDEから
1. pochiGuard.inoを開く
2. ボードとポートを選択
3. 書き込み実行
```

## 📱 使い方

### ボタン操作
- **ボタンA**：テスト通知送信
- **ボタンB**：画面表示切り替え

### LED表示
- **緑**：正常動作
- **黄**：GPS検索中
- **赤**：脱走検知

## 📊 性能指標

| 項目 | 仕様 |
|------|------|
| 重量 | 48g（本体のみ） |
| バッテリー | 120mAh |
| 連続動作時間 | 約6-8時間 |
| GPS精度 | ±5m |
| 通信方式 | WiFi + LINE API |
| 防水性能 | 要防水ケース |

## 🔍 トラブルシューティング

### GPS信号が取得できない
- 屋外または窓際で使用
- 初回Fix: 30秒〜2分待つ
- ボーレート自動検出を待つ

### LINE通知が届かない
- WiFi接続を確認
- Channel Access Tokenを確認
- 友だち追加済みか確認

### バッテリーが持たない
- GPS更新間隔を調整
- 画面輝度を下げる
- 省電力モード検討

## 📈 今後の拡張予定

### Phase 2（センサー追加）
```
M5StickC Plus2
├── Grove Port → GPS
└── HAT端子 → PaHUB
    ├── ToF4M（距離センサー）
    └── ENV.4（温湿度・気圧）
```

追加機能：
- 熱中症予防アラート
- 他の犬との距離測定
- 環境モニタリング

## 📝 更新履歴

### v1.0.0 (2025/08/22)
- 初版リリース
- GPS脱走検知機能
- 歩数計・活動量計測
- LINE通知統合
- ノアちゃん専用設定

## 🙏 謝辞

既存のCare Copilotプロジェクトのコードを参考にしています。

## 📞 サポート

問題が発生した場合は、以下を確認してください：
1. config_local.hの設定
2. WiFi接続状態
3. GPS信号強度

---

**PochiGuard** - 大切な家族を、ポチっと見守る 🐕
