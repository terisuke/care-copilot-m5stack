# ğŸ”§ æŠ€è¡“ä»•æ§˜æ›¸ v1.0

## ğŸ“‹ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åˆ©ç”¨è€…ç’°å¢ƒ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å±…å®¤A      â”‚   å±…å®¤B    â”‚      å…±ç”¨ã‚¹ãƒšãƒ¼ã‚¹       â”‚
â”‚ M5StickC+   â”‚ M5StickC+  â”‚    M5Stack Basic     â”‚
â”‚ +ã‚»ãƒ³ã‚µãƒ¼    â”‚ +ã‚»ãƒ³ã‚µãƒ¼   â”‚    ï¼ˆç®¡ç†ç«¯æœ«ï¼‰        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚            â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ WiFi/MQTT
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ã‚¨ãƒƒã‚¸ã‚µãƒ¼ãƒãƒ¼ï¼ˆæ–½è¨­å†…ï¼‰               â”‚
â”‚  ãƒ»ãƒ‡ãƒ¼ã‚¿é›†ç´„  ãƒ»ä¸€æ¬¡å‡¦ç†  ãƒ»ãƒ­ãƒ¼ã‚«ãƒ«ã‚¢ãƒ©ãƒ¼ãƒˆ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ HTTPS/WebSocket
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹                    â”‚
â”‚  ãƒ»AIåˆ†æ  ãƒ»ãƒ‡ãƒ¼ã‚¿è“„ç©  ãƒ»API  ãƒ»é€šçŸ¥é…ä¿¡         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼              â–¼              â–¼
   LINE Bot    Web Dashboard   Mobile App
```

## ğŸ® ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ä»•æ§˜

### M5Stack Basicï¼ˆç®¡ç†ç«¯æœ«ï¼‰

**åŸºæœ¬ã‚¹ãƒšãƒƒã‚¯**
```
CPU: ESP32 240MHz dual core
RAM: 520KB SRAM
Flash: 16MB
Display: 2.0" 320x240 TFT LCD
Connectivity: WiFi 802.11b/g/n, Bluetooth 4.2
Power: 110mAh battery + USB-C
```

**æ¥ç¶šã‚»ãƒ³ã‚µãƒ¼**
```
I2C (Port A):
- Address 0x44: SHT30 (æ¸©æ¹¿åº¦)
- Address 0x76: BMP280 (æ°—åœ§)

GPIO (Port B):
- Pin 36: PIR Motion Sensor
- Pin 26: LED Indicator

UART (Port C):
- RX16/TX17: GPS Module
```

### M5StickC Plus2ï¼ˆãƒ¢ãƒã‚¤ãƒ«ç«¯æœ«ï¼‰

**åŸºæœ¬ã‚¹ãƒšãƒƒã‚¯**
```
CPU: ESP32-PICO-D4
RAM: 520KB
Flash: 4MB
Display: 1.14" 135x240 TFT
Battery: 120mAh
IMU: MPU6886 (6è»¸)
RTC: BM8563
Buzzer: Built-in
```

**ç”¨é€”åˆ¥è¨­å®š**
```
å±…å®¤ãƒ¢ãƒ¼ãƒ‰:
- åŠ é€Ÿåº¦ã«ã‚ˆã‚‹è»¢å€’æ¤œçŸ¥
- å®šæœŸçš„ãªç’°å¢ƒæ¸¬å®š
- çœé›»åŠ›å‹•ä½œï¼ˆ8æ™‚é–“ï¼‰

å¤–å‡ºãƒ¢ãƒ¼ãƒ‰:
- GPSè¿½è·¡ï¼ˆå¤–ä»˜ã‘ï¼‰
- æ­©æ•°ã‚«ã‚¦ãƒ³ãƒˆ
- SOSæ©Ÿèƒ½
```

### ã‚»ãƒ³ã‚µãƒ¼ä»•æ§˜

#### PIR Unitï¼ˆäººæ„Ÿã‚»ãƒ³ã‚µãƒ¼ï¼‰
```
æ¤œçŸ¥æ–¹å¼: ç„¦é›»å‹èµ¤å¤–ç·š
æ¤œçŸ¥ç¯„å›²: 100Â° Ã— 90Â°
æ¤œçŸ¥è·é›¢: æœ€å¤§5m
å¿œç­”æ™‚é–“: 0.5ç§’
æ¶ˆè²»é›»åŠ›: 0.1mAï¼ˆå¾…æ©Ÿæ™‚ï¼‰
```

#### Ultrasonic Distance Unit
```
æ¸¬å®šç¯„å›²: 20cm - 450cm
ç²¾åº¦: Â±1cm
åˆ†è§£èƒ½: 1mm
å¿œç­”æ™‚é–“: 60ms
ç”¨é€”: é›¢åºŠæ¤œçŸ¥ã€é€šéæ¤œçŸ¥
```

#### ENV III Unit
```
æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼ (SHT30):
- ç¯„å›²: -40Â°C to +125Â°C
- ç²¾åº¦: Â±0.2Â°C

æ¹¿åº¦ã‚»ãƒ³ã‚µãƒ¼:
- ç¯„å›²: 0-100% RH
- ç²¾åº¦: Â±2% RH

æ°—åœ§ã‚»ãƒ³ã‚µãƒ¼ (QMP6988):
- ç¯„å›²: 300-1100 hPa
- ç²¾åº¦: Â±0.06 hPa
```

## ğŸ’¾ ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚¨ãƒƒã‚¸å´ï¼ˆM5Stack/ESP32ï¼‰

#### ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢æ§‹æˆ
```cpp
// main.ino
#include <M5Stack.h>
#include <WiFi.h>
#include <PubSubClient.h>
#include <ArduinoJson.h>

class CareCopaiotDevice {
private:
    // ã‚»ãƒ³ã‚µãƒ¼ç®¡ç†
    SensorManager sensors;
    
    // é€šä¿¡ç®¡ç†
    NetworkManager network;
    
    // ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
    EventProcessor processor;
    
    // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
    DataLogger logger;
    
public:
    void setup();
    void loop();
    void handleEmergency();
};
```

#### ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
```json
{
  "device_id": "M5_ROOM_001",
  "timestamp": 1629350400,
  "type": "sensor_data",
  "data": {
    "motion": true,
    "distance": 120,
    "temperature": 25.3,
    "humidity": 60.5,
    "pressure": 1013.25,
    "battery": 85
  },
  "alert_level": 0
}
```

### ã‚¯ãƒ©ã‚¦ãƒ‰å´ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

#### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
```
Backend:
- Runtime: Node.js 18 LTS
- Framework: Express.js
- WebSocket: Socket.io
- Database: PostgreSQL + TimescaleDB
- Cache: Redis
- Queue: Bull (Redis-based)

AI/ML:
- Language: Python 3.9
- Framework: FastAPI
- ML: scikit-learn, TensorFlow
- Analysis: Pandas, NumPy

Infrastructure:
- Cloud: AWS / Azure
- Container: Docker
- Orchestration: Kubernetes
- CI/CD: GitHub Actions
```

#### APIè¨­è¨ˆ

**RESTful API**
```yaml
# Facility Management
GET    /api/v1/facilities
POST   /api/v1/facilities
GET    /api/v1/facilities/{id}
PUT    /api/v1/facilities/{id}
DELETE /api/v1/facilities/{id}

# Resident Management
GET    /api/v1/residents
POST   /api/v1/residents
GET    /api/v1/residents/{id}
GET    /api/v1/residents/{id}/status
GET    /api/v1/residents/{id}/history

# Alert Management
GET    /api/v1/alerts
POST   /api/v1/alerts
GET    /api/v1/alerts/{id}
PUT    /api/v1/alerts/{id}/acknowledge

# Analytics
GET    /api/v1/analytics/summary
GET    /api/v1/analytics/qol-report
GET    /api/v1/analytics/predictions
```

**WebSocket Events**
```javascript
// Server â†’ Client
socket.emit('sensor_update', data);
socket.emit('alert_triggered', alert);
socket.emit('status_change', status);

// Client â†’ Server
socket.on('subscribe_room', roomId);
socket.on('acknowledge_alert', alertId);
socket.on('request_history', params);
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

#### PostgreSQL Schema
```sql
-- æ–½è¨­ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE facilities (
    id UUID PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    address TEXT,
    capacity INTEGER,
    created_at TIMESTAMP DEFAULT NOW()
);

-- å±…ä½è€…ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE residents (
    id UUID PRIMARY KEY,
    facility_id UUID REFERENCES facilities(id),
    name VARCHAR(255) NOT NULL,
    room_number VARCHAR(50),
    care_level INTEGER,
    risk_factors JSONB,
    created_at TIMESTAMP DEFAULT NOW()
);

-- ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼ˆæ™‚ç³»åˆ—ï¼‰
CREATE TABLE sensor_data (
    time TIMESTAMPTZ NOT NULL,
    device_id VARCHAR(100),
    resident_id UUID,
    data JSONB,
    PRIMARY KEY (time, device_id)
);

-- TimescaleDBè¨­å®š
SELECT create_hypertable('sensor_data', 'time');
```

#### Redis ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
```
# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
resident:{id}:status â†’ JSON
facility:{id}:alerts â†’ List
device:{id}:last_seen â†’ Timestamp

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥
cache:qol_report:{id} â†’ JSON (TTL: 3600)
cache:analytics:{date} â†’ JSON (TTL: 86400)

# ã‚»ãƒƒã‚·ãƒ§ãƒ³
session:{token} â†’ User Data (TTL: 7200)
```

## ğŸ¤– AI/æ©Ÿæ¢°å­¦ç¿’

### ç•°å¸¸æ¤œçŸ¥ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

#### ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ1: ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹
```python
class RuleBasedDetector:
    def detect_anomaly(self, data):
        score = 0
        
        # æ™‚é–“å¸¯ã«ã‚ˆã‚‹é‡ã¿ä»˜ã‘
        hour = data['timestamp'].hour
        if 22 <= hour or hour <= 6:
            time_weight = 2.0
        else:
            time_weight = 1.0
        
        # è»¢å€’æ¤œçŸ¥
        if data['acceleration_spike'] > 3.0:
            score += 10
        
        # é•·æ™‚é–“ä¸å‹•
        if data['no_motion_duration'] > 3600:
            score += 5
        
        # ç’°å¢ƒç•°å¸¸
        if data['temperature'] > 35 or data['temperature'] < 15:
            score += 3
        
        return score * time_weight
```

#### ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ2: æ©Ÿæ¢°å­¦ç¿’
```python
from sklearn.ensemble import IsolationForest
import numpy as np

class MLAnomalyDetector:
    def __init__(self):
        self.model = IsolationForest(
            contamination=0.1,
            random_state=42
        )
        
    def train(self, historical_data):
        features = self.extract_features(historical_data)
        self.model.fit(features)
        
    def predict(self, current_data):
        features = self.extract_features([current_data])
        anomaly_score = self.model.decision_function(features)[0]
        is_anomaly = self.model.predict(features)[0] == -1
        return is_anomaly, anomaly_score
        
    def extract_features(self, data):
        # ç‰¹å¾´é‡æŠ½å‡º
        return np.array([
            d['motion_frequency'],
            d['average_distance'],
            d['temperature_variance'],
            d['time_since_last_motion']
        ] for d in data)
```

### è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³å­¦ç¿’

```python
class BehaviorPatternLearner:
    def __init__(self):
        self.patterns = {}
        
    def learn_daily_pattern(self, resident_id, days=30):
        """æ—¥å¸¸ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å­¦ç¿’"""
        data = self.fetch_historical_data(resident_id, days)
        
        pattern = {
            'wake_time': self.extract_wake_time(data),
            'sleep_time': self.extract_sleep_time(data),
            'activity_peaks': self.find_activity_peaks(data),
            'bathroom_frequency': self.calc_bathroom_freq(data),
            'meal_times': self.extract_meal_times(data)
        }
        
        self.patterns[resident_id] = pattern
        return pattern
        
    def detect_deviation(self, resident_id, current_behavior):
        """ãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰ã®é€¸è„±æ¤œçŸ¥"""
        if resident_id not in self.patterns:
            return False, 0
            
        pattern = self.patterns[resident_id]
        deviation_score = 0
        
        # èµ·åºŠæ™‚é–“ã®é€¸è„±
        wake_diff = abs(current_behavior['wake_time'] - 
                       pattern['wake_time'].total_seconds())
        if wake_diff > 3600:  # 1æ™‚é–“ä»¥ä¸Š
            deviation_score += wake_diff / 3600
            
        return deviation_score > 2, deviation_score
```

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä»•æ§˜

### ãƒ‡ãƒ¼ã‚¿ä¿è­·

#### æš—å·åŒ–
```
é€šä¿¡: TLS 1.3
ä¿å­˜: AES-256-GCM
éµç®¡ç†: AWS KMS / Azure Key Vault
```

#### èªè¨¼ãƒ»èªå¯
```javascript
// JWTèªè¨¼
const jwt = require('jsonwebtoken');

function generateToken(user) {
    return jwt.sign(
        {
            id: user.id,
            facility_id: user.facility_id,
            role: user.role
        },
        process.env.JWT_SECRET,
        { expiresIn: '24h' }
    );
}

// ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
const permissions = {
    admin: ['read', 'write', 'delete', 'manage'],
    staff: ['read', 'write', 'acknowledge'],
    viewer: ['read']
};
```

### ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¨­è¨ˆ

#### ãƒ‡ãƒ¼ã‚¿æœ€å°åŒ–
```
åé›†ãƒ‡ãƒ¼ã‚¿:
âœ“ å¿…è¦æœ€å°é™ã®ã‚»ãƒ³ã‚µãƒ¼æƒ…å ±
âœ“ çµ±è¨ˆåŒ–ã•ã‚ŒãŸè¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³
âœ— å€‹äººã‚’ç‰¹å®šã™ã‚‹ç”»åƒãƒ»éŸ³å£°
âœ— ä¸å¿…è¦ãªä½ç½®æƒ…å ±
```

#### ãƒ‡ãƒ¼ã‚¿ä¿æŒãƒãƒªã‚·ãƒ¼
```
ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿: 24æ™‚é–“
é›†è¨ˆãƒ‡ãƒ¼ã‚¿: 90æ—¥
çµ±è¨ˆãƒ‡ãƒ¼ã‚¿: 1å¹´
å€‹äººè­˜åˆ¥æƒ…å ±: å‰Šé™¤å¯èƒ½
```

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä»•æ§˜

### ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ 
```
ã‚»ãƒ³ã‚µãƒ¼ â†’ ã‚¨ãƒƒã‚¸: < 100ms
ã‚¨ãƒƒã‚¸ â†’ ã‚¯ãƒ©ã‚¦ãƒ‰: < 500ms
ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥: < 3ç§’
ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ›´æ–°: < 1ç§’
```

#### ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£
```
åŒæ™‚æ¥ç¶šãƒ‡ãƒã‚¤ã‚¹: 10,000å°
ãƒ‡ãƒ¼ã‚¿å‡¦ç†: 100,000 events/ç§’
ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: 10TB/å¹´
APIå‘¼ã³å‡ºã—: 1,000 req/ç§’
```

#### å¯ç”¨æ€§
```
ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒç‡: 99.9%
è¨ˆç”»åœæ­¢: æœˆ1å›ã€æ·±å¤œ2æ™‚é–“
ç½å®³å¾©æ—§æ™‚é–“: < 4æ™‚é–“
ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—: æ—¥æ¬¡
```

## ğŸ”„ ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ é€£æº

#### ä»‹è­·è¨˜éŒ²ã‚·ã‚¹ãƒ†ãƒ 
```javascript
// CAREKARTEé€£æºä¾‹
class CarekarteIntegration {
    async syncEvent(event) {
        const payload = {
            timestamp: event.timestamp,
            resident_id: this.mapResidentId(event.resident_id),
            event_type: this.mapEventType(event.type),
            details: event.data
        };
        
        return await axios.post(
            'https://api.carekarte.jp/v1/events',
            payload,
            { headers: this.getAuthHeaders() }
        );
    }
}
```

#### LINE Messaging API
```javascript
const line = require('@line/bot-sdk');

class LineNotification {
    constructor() {
        this.client = new line.Client({
            channelAccessToken: process.env.LINE_TOKEN
        });
    }
    
    async sendAlert(userId, alert) {
        const message = {
            type: 'flex',
            altText: `ç·Šæ€¥åº¦${alert.level}: ${alert.message}`,
            contents: this.createFlexMessage(alert)
        };
        
        return await this.client.pushMessage(userId, message);
    }
}
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆä»•æ§˜

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

#### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
```javascript
// Jestä½¿ç”¨ä¾‹
describe('AlertProcessor', () => {
    test('ç·Šæ€¥ã‚¢ãƒ©ãƒ¼ãƒˆãŒæ­£ã—ãåˆ¤å®šã•ã‚Œã‚‹', () => {
        const processor = new AlertProcessor();
        const data = {
            motion: false,
            duration: 7200,
            time: '02:30'
        };
        
        const result = processor.evaluate(data);
        expect(result.level).toBe(4);
        expect(result.notify).toBe(true);
    });
});
```

#### çµ±åˆãƒ†ã‚¹ãƒˆ
```python
# pytestä½¿ç”¨ä¾‹
def test_end_to_end_alert_flow():
    # ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿é€ä¿¡
    response = client.post('/api/sensor', json=test_data)
    assert response.status_code == 200
    
    # ã‚¢ãƒ©ãƒ¼ãƒˆç”Ÿæˆç¢ºèª
    alert = Alert.query.filter_by(
        device_id=test_data['device_id']
    ).first()
    assert alert is not None
    
    # é€šçŸ¥é€ä¿¡ç¢ºèª
    assert mock_line_api.called
```

### å“è³ªåŸºæº–

```
ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸: > 80%
ãƒã‚°å¯†åº¦: < 1 bug/KLOC
MTBF: > 720æ™‚é–“
MTTR: < 1æ™‚é–“
```

## ğŸ“¦ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### Dockeræ§‹æˆ
```dockerfile
# Backend Dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
EXPOSE 3000
CMD ["node", "server.js"]
```

### Kubernetesè¨­å®š
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: care-copilot-api
spec:
  replicas: 3
  selector:
    matchLabels:
      app: care-copilot-api
  template:
    metadata:
      labels:
        app: care-copilot-api
    spec:
      containers:
      - name: api
        image: care-copilot/api:latest
        ports:
        - containerPort: 3000
        env:
        - name: NODE_ENV
          value: "production"
```

## ğŸ“ˆ ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

### ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†
```
Prometheusè¨­å®š:
- ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹

Grafanaãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰:
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
- ã‚¢ãƒ©ãƒ¼ãƒˆçµ±è¨ˆ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™
```

### ãƒ­ã‚°ç®¡ç†
```
ELKã‚¹ã‚¿ãƒƒã‚¯:
- Elasticsearch: ãƒ­ã‚°ä¿å­˜
- Logstash: ãƒ­ã‚°åé›†
- Kibana: ãƒ­ã‚°åˆ†æ

ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«:
- ERROR: ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼
- WARN: è­¦å‘Šäº‹é …
- INFO: é€šå¸¸æ“ä½œ
- DEBUG: ãƒ‡ãƒãƒƒã‚°æƒ…å ±
```

---

## ğŸ”„ æ›´æ–°å±¥æ­´

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ—¥ä»˜ | å¤‰æ›´å†…å®¹ |
|-----------|------|---------|
| 1.0.0 | 2025-08-16 | åˆç‰ˆä½œæˆ |
| 1.1.0 | (äºˆå®š) | GPSæ©Ÿèƒ½è¿½åŠ  |
| 2.0.0 | (äºˆå®š) | AIæ©Ÿèƒ½å¼·åŒ– |

---

*Technical Excellence for Human Dignity*